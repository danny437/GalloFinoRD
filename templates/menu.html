<!-- templates/menu.html -->
{% extends "base.html" %}

{% block title %}GFRD MenÃº Principal{% endblock %}

{% block head %}
  <script>
    function crearBackup() {
      fetch("/backup", { method: "POST" })
        .then(r => r.json())
        .then(d => {
          const msg = document.getElementById("mensaje-backup");
          if (d.error) {
            msg.innerHTML = `<span style="color:#e74c3c;">âŒ ${d.error}</span>`;
          } else {
            msg.innerHTML = `<span style="color:#27ae60;">${d.mensaje}</span>`;
            // Opcional: descarga automÃ¡tica
            window.location.href = "/download/" + d.archivo;
          }
        })
        .catch(err => {
          document.getElementById("mensaje-backup").innerHTML = `<span style="color:#e74c3c;">âŒ Error de red.</span>`;
        });
    }
  </script>
{% endblock %}

{% block content %}
<div class="container">
  <div class="header-modern">
    <div>
      <h1>GFRD MenÃº Principal</h1>
      <p class="subtitle">Sistema moderno â€¢ AÃ±o 2026</p>
    </div>
    <img src="{{ url_for('logo') }}" alt="Logo GFRD" class="logo">
  </div>

  <div class="card">
    <div class="menu-grid">
      <a href="{{ url_for('formulario_gallo') }}" class="menu-btn">ğŸ“ Registrar Gallo</a>
      <a href="{{ url_for('cruce_inbreeding') }}" class="menu-btn">ğŸ” Cruce Inbreeding</a>
      <a href="{{ url_for('lista_gallos') }}" class="menu-btn">ğŸ“‹ Mis Gallos</a>
      <a href="{{ url_for('buscar') }}" class="menu-btn">ğŸ” Buscar</a>
      <a href="{{ url_for('exportar') }}" class="menu-btn">ğŸ“¤ Exportar</a>
      <a href="javascript:void(0);" class="menu-btn" onclick="crearBackup()">ğŸ’¾ Respaldo</a>
      <a href="{{ url_for('cerrar_sesion') }}" class="menu-btn" style="background:linear-gradient(135deg,#7f8c8d,#95a5a6);">ğŸšª Cerrar SesiÃ³n</a>
    </div>
  </div>
</div>

<div id="mensaje-backup" style="text-align:center; margin-top:15px; color:#27ae60; font-weight:bold;"></div>
{% endblock %}
