<!-- templates/cruce_inbreeding.html -->
{% extends "base.html" %}

{% block title %}GFRD Cruce Inbreeding{% endblock %}

{% block head %}
<script>
function actualizarCampos() {
  const tipo = document.getElementById("tipo_cruce").value;
  const registro = document.getElementById("registro");
  const opciones = `{{ opciones_gallos|safe }}`;

  if (tipo === "Padre-Hija") {
    registro.innerHTML = `
      <div class="form-group">
        <label for="gallo1">Padre</label>
        <select name="gallo1" id="gallo1" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>
      <div class="form-group">
        <label for="gallo2">Hija</label>
        <select name="gallo2" id="gallo2" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>`;
  } else if (tipo === "Madre-Hijo") {
    registro.innerHTML = `
      <div class="form-group">
        <label for="gallo1">Madre</label>
        <select name="gallo1" id="gallo1" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>
      <div class="form-group">
        <label for="gallo2">Hijo</label>
        <select name="gallo2" id="gallo2" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>`;
  } else if (tipo === "Hermano-Hermana") {
    registro.innerHTML = `
      <div class="form-group">
        <label for="gallo1">Hermano 1</label>
        <select name="gallo1" id="gallo1" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>
      <div class="form-group">
        <label for="gallo2">Hermana</label>
        <select name="gallo2" id="gallo2" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>`;
  } else {
    registro.innerHTML = `
      <div class="form-group">
        <label for="gallo1">Gallo 1</label>
        <select name="gallo1" id="gallo1" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>
      <div class="form-group">
        <label for="gallo2">Gallo 2</label>
        <select name="gallo2" id="gallo2" required>
          <option value="">-- Elige un gallo --</option>${opciones}
        </select>
      </div>`;
  }
}
</script>
{% endblock %}

{% block content %}
<div class="container">
  <div class="header-modern">
    <div>
      <h1>GFRD Cruce Inbreeding</h1>
      <p class="subtitle">Sistema moderno ‚Ä¢ A√±o 2026</p>
    </div>
    <img src="{{ url_for('logo') }}" alt="Logo GFRD" class="logo">
  </div>
  <form method="POST" action="{{ url_for('registrar_cruce') }}" enctype="multipart/form-data" class="card">
    <div class="form-group">
      <label for="tipo_cruce">Tipo de Cruce</label>
      <select name="tipo" id="tipo_cruce" required onchange="actualizarCampos()">
        <option value="">-- Selecciona --</option>
        <option value="Padre-Hija">Padre - Hija</option>
        <option value="Madre-Hijo">Madre - Hijo</option>
        <option value="Hermano-Hermana">Hermano - Hermana</option>
        <option value="Medio-Hermanos">Medio Hermanos</option>
        <option value="T√≠o-Sobrino">T√≠o - Sobrino</option>
      </select>
    </div>

    <div id="registro">
      <div class="form-group">
        <label for="gallo1">Gallo 1 (ej. Padre)</label>
        <select name="gallo1" id="gallo1" required>
          <option value="">-- Elige un gallo --</option>
          {{ opciones_gallos|safe }}
        </select>
      </div>
      <div class="form-group">
        <label for="gallo2">Gallo 2 (ej. Hija)</label>
        <select name="gallo2" id="gallo2" required>
          <option value="">-- Elige un gallo --</option>
          {{ opciones_gallos|safe }}
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="generacion">Generaci√≥n (1-6)</label>
      <select name="generacion" id="generacion" required>
        <option value="">-- Elige --</option>
        <option value="1">1 (25%)</option>
        <option value="2">2 (37.5%)</option>
        <option value="3">3 (50%)</option>
        <option value="4">4 (62.5%)</option>
        <option value="5">5 (75%)</option>
        <option value="6">6 (87.5%)</option>
      </select>
    </div>

    <div class="form-group">
      <label for="notas">Notas (opcional)</label>
      <textarea name="notas" id="notas" rows="3"></textarea>
    </div>

    <div class="form-group">
      <label for="foto">Foto del cruce (opcional)</label>
      <input type="file" name="foto" id="foto" accept="image/*">
    </div>

    <button type="submit">‚úÖ Registrar Cruce</button>

    <div class="acciones-centradas">
      <a href="{{ url_for('menu_principal') }}" class="btn">üè† Men√∫ Principal</a>
    </div>
  </form>
</div>
{% endblock %}
